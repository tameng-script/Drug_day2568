<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.2.7/vfs_fonts.js"></script>
    <style>
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #f8f5f2;
        }
        .container {
            max-width: 900px;
        }
        .quiz-card {
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .btn-primary {
            background-color: #4f46e5;
            transition: all 0.3s ease;
        }
        .btn-primary:hover {
            background-color: #4338ca;
            transform: translateY(-2px);
        }
        .option-btn {
            transition: all 0.2s;
            border: 2px solid #e5e7eb;
        }
        .option-btn:hover {
            border-color: #4f46e5;
        }
        .option-btn.selected {
            background-color: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }
        .option-btn.correct {
            background-color: #10b981;
            color: white;
            border-color: #10b981;
        }
        .option-btn.incorrect {
            background-color: #ef4444;
            color: white;
            border-color: #ef4444;
        }
        .header-image {
            max-height: 200px;
            object-fit: contain;
        }
        .certificate {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
        }
        .certificate-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            text-align: center;
        }
        .tab {
            cursor: pointer;
            transition: all 0.3s;
        }
        .tab.active {
            border-bottom: 3px solid #4f46e5;
            color: #4f46e5;
            font-weight: bold;
        }
        .dashboard-card {
            transition: all 0.3s;
        }
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .answer-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .answer-table th, .answer-table td {
            border: 1px solid #e5e7eb;
            padding: 8px 12px;
            text-align: left;
        }
        .answer-table th {
            background-color: #f3f4f6;
        }
        .answer-table .correct-answer {
            color: #10b981;
            font-weight: bold;
        }
        .answer-table .wrong-answer {
            color: #ef4444;
        }
        .check-icon {
            color: #10b981;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8">
        <!-- Login Page -->
        <div id="login-page" class="flex flex-col items-center">
            <div class="w-full max-w-md bg-white rounded-lg quiz-card p-8 mb-8">
                <div class="text-center mb-6">
                    <img src="https://images.dmc.tv/www/images/sarm/3626;3640;3609;3607;3619;3616;3641;3656;400.jpg" alt="‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà" class="header-image mx-auto mb-4">
                    <h1 class="text-3xl font-bold text-indigo-800">üìö ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà üìö</h1>
                    <p class="text-gray-600 mt-2">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤</p>
                </div>
                <div class="mb-6">
                    <label for="username" class="block text-gray-700 text-sm font-bold mb-2">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•:</label>
                    <input type="text" id="username" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-indigo-500" placeholder="‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•">
                </div>
                <div class="mb-6">
                    <label for="classroom" class="block text-gray-700 text-sm font-bold mb-2">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô:</label>
                    <select id="classroom" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-indigo-500">
                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</option>
                        <option value="‡∏õ.1">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 1</option>
                        <option value="‡∏õ.2">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 2</option>
                        <option value="‡∏õ.3">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 3</option>
                        <option value="‡∏õ.4">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 4</option>
                        <option value="‡∏õ.5">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 5</option>
                        <option value="‡∏õ.6">‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏õ‡∏µ‡∏ó‡∏µ‡πà 6</option>
                    </select>
                </div>
                <div class="flex items-center justify-between">
                    <button id="start-quiz-btn" class="btn-primary w-full text-white font-bold py-3 px-4 rounded focus:outline-none focus:shadow-outline flex items-center justify-center">
                        <span class="mr-2">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                        </svg>
                    </button>
                </div>
                <div class="mt-6 flex justify-center space-x-4">
                    <button id="show-scores-btn" class="text-indigo-600 hover:text-indigo-800 font-medium">
                        üìä ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                    </button>
                    <button id="show-dashboard-btn" class="text-indigo-600 hover:text-indigo-800 font-medium">
                        üìã ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
                    </button>
                </div>
            </div>
        </div>

        <!-- Quiz Page -->
        <div id="quiz-page" class="hidden">
            <div class="bg-white rounded-lg quiz-card p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-indigo-800">üìù ‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà</h2>
                    <div>
                        <span id="current-question" class="font-bold text-indigo-600">1</span>
                        <span class="text-gray-500">/10</span>
                    </div>
                </div>
                <div id="question-container" class="mb-6">
                    <p id="question-text" class="text-lg font-medium mb-4"></p>
                    <div id="options-container" class="space-y-3">
                        <!-- Options will be inserted here -->
                    </div>
                </div>
                <div class="flex justify-between">
                    <button id="prev-btn" class="btn-primary text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline hidden">
                        ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö
                    </button>
                    <button id="show-explanation-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                        üìù ‡πÄ‡∏â‡∏•‡∏¢
                    </button>
                    <button id="next-btn" class="btn-primary text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline hidden">
                        ‡∏Ç‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                    </button>
                    <button id="finish-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline hidden">
                        ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
                    </button>
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div id="results-page" class="hidden">
            <div class="bg-white rounded-lg quiz-card p-6 mb-8">
                <div class="text-center mb-6">
                    <h2 class="text-2xl font-bold text-indigo-800">üéâ ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö üéâ</h2>
                    <p class="text-gray-600 mt-2">‡∏Ñ‡∏∏‡∏ì <span id="result-name" class="font-medium"></span></p>
                    <p class="text-gray-600">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô <span id="result-classroom" class="font-medium"></span></p>
                    <p class="text-gray-600">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö <span id="result-date" class="font-medium"></span></p>
                </div>
                <div class="flex justify-center mb-6">
                    <div class="text-center">
                        <div class="text-5xl font-bold text-indigo-600 mb-2">
                            <span id="score">0</span>
                            <span class="text-gray-500">/100</span>
                        </div>
                        <p id="pass-status" class="text-lg font-medium"></p>
                    </div>
                </div>
                <div id="certificate-section" class="hidden mb-6">
                    <div class="text-center">
                        <button id="generate-certificate-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                            üèÜ ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£
                        </button>
                    </div>
                </div>
                <div class="flex justify-center space-x-4">
                    <button id="show-answers-btn" class="bg-yellow-500 hover:bg-yellow-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                        üìù ‡∏î‡∏π‡πÄ‡∏â‡∏•‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    </button>
                    <button id="retry-btn" class="btn-primary text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                        üîÑ ‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
                    </button>
                    <button id="view-scores-btn" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
                        üìä ‡∏î‡∏π‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
                    </button>
                </div>
            </div>
        </div>

        <!-- Scores Page -->
        <div id="scores-page" class="hidden">
            <div class="bg-white rounded-lg quiz-card p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-indigo-800">üìä ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</h2>
                    <button id="back-to-home-from-scores" class="text-indigo-600 hover:text-indigo-800">
                        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white">
                        <thead>
                            <tr>
                                <th class="py-2 px-4 border-b border-gray-200 bg-indigo-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                                <th class="py-2 px-4 border-b border-gray-200 bg-indigo-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                <th class="py-2 px-4 border-b border-gray-200 bg-indigo-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</th>
                                <th class="py-2 px-4 border-b border-gray-200 bg-indigo-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th>
                                <th class="py-2 px-4 border-b border-gray-200 bg-indigo-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö</th>
                                <th class="py-2 px-4 border-b border-gray-200 bg-indigo-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö</th>
                            </tr>
                        </thead>
                        <tbody id="scores-table-body">
                            <!-- Scores will be inserted here -->
                            <tr>
                                <td colspan="6" class="py-4 px-4 text-center text-gray-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Dashboard Page -->
        <div id="dashboard-page" class="hidden">
            <div class="bg-white rounded-lg quiz-card p-6 mb-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold text-indigo-800">üìã ‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</h2>
                    <button id="back-to-home-from-dashboard" class="text-indigo-600 hover:text-indigo-800">
                        ‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
                    </button>
                </div>
                
                <div class="flex mb-6 border-b">
                    <div class="tab active px-4 py-2" data-tab="summary">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•</div>
                    <div class="tab px-4 py-2" data-tab="certificates">‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£</div>
                </div>
                
                <div id="summary-tab" class="tab-content">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                        <div class="bg-blue-50 p-4 rounded-lg dashboard-card">
                            <p class="text-sm text-blue-600 font-medium">‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                            <p id="total-participants" class="text-3xl font-bold text-blue-800">0</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg dashboard-card">
                            <p class="text-sm text-green-600 font-medium">‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå</p>
                            <p id="passed-count" class="text-3xl font-bold text-green-800">0</p>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg dashboard-card">
                            <p class="text-sm text-red-600 font-medium">‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå</p>
                            <p id="failed-count" class="text-3xl font-bold text-red-800">0</p>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-gray-700 mb-3">‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-white">
                                <thead>
                                    <tr>
                                        <th class="py-2 px-4 border-b border-gray-200 bg-green-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏•‡∏≥‡∏î‡∏±‡∏ö</th>
                                        <th class="py-2 px-4 border-b border-gray-200 bg-green-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                        <th class="py-2 px-4 border-b border-gray-200 bg-green-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô</th>
                                        <th class="py-2 px-4 border-b border-gray-200 bg-green-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</th>
                                        <th class="py-2 px-4 border-b border-gray-200 bg-green-50 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö</th>
                                    </tr>
                                </thead>
                                <tbody id="passed-table-body">
                                    <!-- Passed students will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div id="certificates-tab" class="tab-content hidden">
                    <div class="mb-6">
                        <h3 class="text-lg font-bold text-gray-700 mb-3">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="certificate-list">
                            <!-- Certificate cards will be inserted here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Quiz questions
        const quizQuestions = [
            {
                question: "‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏£?",
                options: ["24 ‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô", "26 ‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô", "28 ‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô", "30 ‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô"],
                answer: 1,
                explanation: "‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 26 ‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô ‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏õ‡∏µ ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà"
            },
            {
                question: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏£‡∏±‡∏ä‡∏™‡∏°‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏û‡∏£‡∏∞‡∏°‡∏´‡∏≤‡∏Å‡∏©‡∏±‡∏ï‡∏£‡∏¥‡∏¢‡πå‡∏û‡∏£‡∏∞‡∏≠‡∏á‡∏Ñ‡πå‡πÉ‡∏î?",
                options: ["‡∏£‡∏±‡∏ä‡∏Å‡∏≤‡∏•‡∏ó‡∏µ‡πà 1", "‡∏£‡∏±‡∏ä‡∏Å‡∏≤‡∏•‡∏ó‡∏µ‡πà 2", "‡∏£‡∏±‡∏ä‡∏Å‡∏≤‡∏•‡∏ó‡∏µ‡πà 3", "‡∏£‡∏±‡∏ä‡∏Å‡∏≤‡∏•‡∏ó‡∏µ‡πà 4"],
                answer: 0,
                explanation: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏ô‡∏£‡∏±‡∏ä‡∏™‡∏°‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏û‡∏£‡∏∞‡∏ö‡∏≤‡∏ó‡∏™‡∏°‡πÄ‡∏î‡πá‡∏à‡∏û‡∏£‡∏∞‡∏û‡∏∏‡∏ó‡∏ò‡∏¢‡∏≠‡∏î‡∏ü‡πâ‡∏≤‡∏à‡∏∏‡∏¨‡∏≤‡πÇ‡∏•‡∏Å‡∏°‡∏´‡∏≤‡∏£‡∏≤‡∏ä (‡∏£‡∏±‡∏ä‡∏Å‡∏≤‡∏•‡∏ó‡∏µ‡πà 1) ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏µ ‡∏û.‡∏®. 2329"
            },
            {
                question: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£?",
                options: ["‡∏†‡∏π‡πà", "‡∏ó‡∏£‡∏†‡∏π", "‡∏ó‡∏£‡∏†‡∏π‡πà", "‡∏†‡∏π"],
                answer: 1,
                explanation: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏•‡πà‡∏ô‡∏ß‡πà‡∏≤ '‡∏†‡∏π‡πà' ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ '‡∏™‡∏∏‡∏ô‡∏ó‡∏£' ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏û‡∏£‡∏∞‡∏£‡∏≤‡∏ä‡∏ó‡∏≤‡∏ô‡πÉ‡∏ô‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á"
            },
            {
                question: "‡∏ß‡∏£‡∏£‡∏ì‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà?",
                options: ["‡∏û‡∏£‡∏∞‡∏≠‡∏†‡∏±‡∏¢‡∏°‡∏ì‡∏µ", "‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏ó‡∏≠‡∏á", "‡∏Ç‡∏∏‡∏ô‡∏ä‡πâ‡∏≤‡∏á‡∏Ç‡∏∏‡∏ô‡πÅ‡∏ú‡∏ô", "‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÅ‡∏Å‡∏•‡∏á"],
                answer: 2,
                explanation: "‡∏Ç‡∏∏‡∏ô‡∏ä‡πâ‡∏≤‡∏á‡∏Ç‡∏∏‡∏ô‡πÅ‡∏ú‡∏ô ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏™‡∏†‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Ç‡∏∏‡∏ô‡∏ä‡πâ‡∏≤‡∏á‡∏Ç‡∏∏‡∏ô‡πÅ‡∏ú‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏£‡∏£‡∏ì‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡πà‡∏á‡πÇ‡∏î‡∏¢‡∏Å‡∏ß‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏ó‡πà‡∏≤‡∏ô"
            },
            {
                question: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡∏¢‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏¢‡∏π‡πÄ‡∏ô‡∏™‡πÇ‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡∏Å‡πÉ‡∏ô‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏î?",
                options: ["‡∏Å‡∏ß‡∏µ‡πÄ‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡∏Å", "‡∏õ‡∏£‡∏≤‡∏ä‡∏ç‡πå‡πÄ‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡∏Å", "‡∏ô‡∏±‡∏Å‡∏õ‡∏£‡∏∞‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÄ‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡∏Å", "‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏≤‡∏á‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡∏Å"],
                answer: 0,
                explanation: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡∏¢‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏¢‡∏π‡πÄ‡∏ô‡∏™‡πÇ‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô '‡∏Å‡∏ß‡∏µ‡πÄ‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡πÇ‡∏•‡∏Å' ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏õ‡∏µ ‡∏û.‡∏®. 2529 ‡πÉ‡∏ô‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏Ñ‡∏£‡∏ö‡∏£‡∏≠‡∏ö 200 ‡∏õ‡∏µ‡∏ä‡∏≤‡∏ï‡∏Å‡∏≤‡∏•"
            },
            {
                question: "‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÄ‡∏≠‡∏Å‡πÉ‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á '‡∏û‡∏£‡∏∞‡∏≠‡∏†‡∏±‡∏¢‡∏°‡∏ì‡∏µ'?",
                options: ["‡∏Ç‡∏∏‡∏ô‡πÅ‡∏ú‡∏ô", "‡∏û‡∏£‡∏∞‡∏•‡∏≠", "‡∏û‡∏£‡∏∞‡∏≠‡∏†‡∏±‡∏¢‡∏°‡∏ì‡∏µ", "‡πÑ‡∏Å‡∏£‡∏ó‡∏≠‡∏á"],
                answer: 2,
                explanation: "‡∏û‡∏£‡∏∞‡∏≠‡∏†‡∏±‡∏¢‡∏°‡∏ì‡∏µ ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÄ‡∏≠‡∏Å‡πÉ‡∏ô‡∏ß‡∏£‡∏£‡∏ì‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á '‡∏û‡∏£‡∏∞‡∏≠‡∏†‡∏±‡∏¢‡∏°‡∏ì‡∏µ' ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡πÄ‡∏≠‡∏Å‡∏Ç‡∏≠‡∏á‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà"
            },
            {
                question: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∞‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?",
                options: ["‡∏Å‡∏•‡∏≠‡∏ô‡∏™‡∏∏‡∏†‡∏≤‡∏û", "‡πÇ‡∏Ñ‡∏•‡∏á‡∏™‡∏µ‡πà‡∏™‡∏∏‡∏†‡∏≤‡∏û", "‡∏Å‡∏≤‡∏û‡∏¢‡πå‡∏¢‡∏≤‡∏ô‡∏µ 11", "‡∏£‡πà‡∏≤‡∏¢‡∏¢‡∏≤‡∏ß"],
                answer: 0,
                explanation: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏û‡∏¥‡πÄ‡∏®‡∏©‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏Ñ‡∏≥‡∏õ‡∏£‡∏∞‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏•‡∏≠‡∏ô‡∏™‡∏∏‡∏†‡∏≤‡∏û ‡∏à‡∏ô‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡∏¢‡πà‡∏≠‡∏á‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô '‡πÄ‡∏à‡πâ‡∏≤‡∏û‡πà‡∏≠‡∏Å‡∏•‡∏≠‡∏ô‡∏™‡∏∏‡∏†‡∏≤‡∏û'"
            },
            {
                question: "‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà?",
                options: ["‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏ó‡∏≠‡∏á", "‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡πÅ‡∏Å‡∏•‡∏á", "‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡∏û‡∏£‡∏∞‡∏ö‡∏≤‡∏ó", "‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡∏™‡∏∏‡∏û‡∏£‡∏£‡∏ì"],
                answer: 0,
                explanation: "‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏ó‡∏≠‡∏á ‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏¥‡∏£‡∏≤‡∏®‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà ‡πÅ‡∏ï‡πà‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏ô‡∏°‡∏±‡∏™‡∏Å‡∏≤‡∏£‡∏û‡∏£‡∏∞‡πÄ‡∏à‡∏î‡∏µ‡∏¢‡πå‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏ó‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡∏™‡∏£‡∏∞‡πÄ‡∏Å‡∏®"
            },
            {
                question: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡πÄ‡∏Ñ‡∏¢‡∏ö‡∏ß‡∏ä‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏£‡∏∞‡∏†‡∏¥‡∏Å‡∏©‡∏∏‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡πÉ‡∏î?",
                options: ["‡∏ß‡∏±‡∏î‡∏û‡∏£‡∏∞‡πÄ‡∏ä‡∏ï‡∏∏‡∏û‡∏ô‡∏Ø (‡∏ß‡∏±‡∏î‡πÇ‡∏û‡∏ò‡∏¥‡πå)", "‡∏ß‡∏±‡∏î‡∏£‡∏≤‡∏ä‡∏ö‡∏π‡∏£‡∏ì‡∏∞", "‡∏ß‡∏±‡∏î‡πÄ‡∏ó‡∏û‡∏ò‡∏¥‡∏î‡∏≤‡∏£‡∏≤‡∏°", "‡∏ß‡∏±‡∏î‡∏≠‡∏£‡∏∏‡∏ì‡∏£‡∏≤‡∏ä‡∏ß‡∏£‡∏≤‡∏£‡∏≤‡∏° (‡∏ß‡∏±‡∏î‡πÅ‡∏à‡πâ‡∏á)"],
                answer: 2,
                explanation: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡πÄ‡∏Ñ‡∏¢‡∏ö‡∏ß‡∏ä‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏£‡∏∞‡∏†‡∏¥‡∏Å‡∏©‡∏∏‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡πÄ‡∏ó‡∏û‡∏ò‡∏¥‡∏î‡∏≤‡∏£‡∏≤‡∏° ‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏Å‡∏≠‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏Å‡∏•‡∏±‡πà‡∏ô‡πÅ‡∏Å‡∏•‡πâ‡∏á‡πÉ‡∏ô‡∏£‡∏±‡∏ä‡∏Å‡∏≤‡∏•‡∏ó‡∏µ‡πà 3"
            },
            {
                question: "‡∏Ç‡πâ‡∏≠‡πÉ‡∏î‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏î‡πà‡∏ô‡πÉ‡∏ô‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà?",
                options: ["‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢", "‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏î‡πÅ‡∏ó‡∏£‡∏Å‡∏Ñ‡∏ï‡∏¥‡∏™‡∏≠‡∏ô‡πÉ‡∏à", "‡∏ô‡∏¥‡∏¢‡∏°‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏†‡∏≤‡∏©‡∏≤‡∏ö‡∏≤‡∏•‡∏µ‡∏™‡∏±‡∏ô‡∏™‡∏Å‡∏§‡∏ï‡∏¢‡∏≤‡∏Å ‡πÜ", "‡∏°‡∏µ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏±‡∏ô"],
                answer: 2,
                explanation: "‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà‡∏°‡∏µ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡πÄ‡∏î‡πà‡∏ô‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏†‡∏≤‡∏©‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡∏ô‡∏¥‡∏¢‡∏°‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏†‡∏≤‡∏©‡∏≤‡∏ö‡∏≤‡∏•‡∏µ‡∏™‡∏±‡∏ô‡∏™‡∏Å‡∏§‡∏ï‡∏ó‡∏µ‡πà‡∏¢‡∏≤‡∏Å‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ñ‡∏ô‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÑ‡∏î‡πâ"
            }
        ];

        // Variables
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = Array(quizQuestions.length).fill(null);
        let username = "";
        let classroom = "";
        let quizDate = "";
        let shuffledQuestions = [];
        let originalQuestionOrder = []; // ‡πÄ‡∏Å‡πá‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏•‡∏¢

        // DOM Elements
        const loginPage = document.getElementById('login-page');
        const quizPage = document.getElementById('quiz-page');
        const resultsPage = document.getElementById('results-page');
        const scoresPage = document.getElementById('scores-page');
        const dashboardPage = document.getElementById('dashboard-page');
        
        const usernameInput = document.getElementById('username');
        const classroomSelect = document.getElementById('classroom');
        const startQuizBtn = document.getElementById('start-quiz-btn');
        const showScoresBtn = document.getElementById('show-scores-btn');
        const showDashboardBtn = document.getElementById('show-dashboard-btn');
        
        const currentQuestionElement = document.getElementById('current-question');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const showExplanationBtn = document.getElementById('show-explanation-btn');
        const finishBtn = document.getElementById('finish-btn');
        
        const resultNameElement = document.getElementById('result-name');
        const resultClassroomElement = document.getElementById('result-classroom');
        const resultDateElement = document.getElementById('result-date');
        const scoreElement = document.getElementById('score');
        const passStatusElement = document.getElementById('pass-status');
        const certificateSection = document.getElementById('certificate-section');
        const generateCertificateBtn = document.getElementById('generate-certificate-btn');
        const showAnswersBtn = document.getElementById('show-answers-btn');
        
        const retryBtn = document.getElementById('retry-btn');
        const viewScoresBtn = document.getElementById('view-scores-btn');
        
        const scoresTableBody = document.getElementById('scores-table-body');
        const backToHomeFromScores = document.getElementById('back-to-home-from-scores');
        
        const backToHomeFromDashboard = document.getElementById('back-to-home-from-dashboard');
        const totalParticipantsElement = document.getElementById('total-participants');
        const passedCountElement = document.getElementById('passed-count');
        const failedCountElement = document.getElementById('failed-count');
        const passedTableBody = document.getElementById('passed-table-body');
        const certificateList = document.getElementById('certificate-list');

        // Tab navigation
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
                document.getElementById(`${tab.dataset.tab}-tab`).classList.remove('hidden');
            });
        });

        // Format date in Thai
        function formatThaiDate(date) {
            const thaiMonths = [
                '‡∏°.‡∏Ñ.', '‡∏Å.‡∏û.', '‡∏°‡∏µ.‡∏Ñ.', '‡πÄ‡∏°.‡∏¢.', '‡∏û.‡∏Ñ.', '‡∏°‡∏¥.‡∏¢.',
                '‡∏Å.‡∏Ñ.', '‡∏™.‡∏Ñ.', '‡∏Å.‡∏¢.', '‡∏ï.‡∏Ñ.', '‡∏û.‡∏¢.', '‡∏ò.‡∏Ñ.'
            ];
            
            const day = date.getDate();
            const month = thaiMonths[date.getMonth()];
            const year = date.getFullYear() + 543; // Convert to Buddhist Era
            
            return `${day} ${month} ${year}`;
        }

        // Initialize quiz
        function initQuiz() {
            username = usernameInput.value.trim();
            classroom = classroomSelect.value;
            
            if (!username) {
                Swal.fire({
                    icon: 'warning',
                    title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•',
                    text: '‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö'
                });
                return;
            }
            
            if (!classroom) {
                Swal.fire({
                    icon: 'warning',
                    title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô',
                    text: '‡πÇ‡∏õ‡∏£‡∏î‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö'
                });
                return;
            }
            
            // Set quiz date
            const now = new Date();
            quizDate = formatThaiDate(now);
            
            // Reset quiz state
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = Array(quizQuestions.length).fill(null);
            
            // ‡∏™‡∏•‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
            shuffleQuestionsOnStart();
            
            // Show quiz page
            loginPage.classList.add('hidden');
            quizPage.classList.remove('hidden');
            
            // Load first question
            loadQuestion();
        }

        // ‡∏™‡∏•‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö
        function shuffleQuestionsOnStart() {
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≤‡∏£‡πå‡πÄ‡∏£‡∏¢‡πå‡∏Ç‡∏≠‡∏á‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
            originalQuestionOrder = Array.from({ length: quizQuestions.length }, (_, i) => i);
            
            // ‡∏™‡∏•‡∏±‡∏ö‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°
            const shuffledIndices = [...originalQuestionOrder].sort(() => Math.random() - 0.5);
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏™‡∏•‡∏±‡∏ö‡πÅ‡∏•‡πâ‡∏ß
            shuffledQuestions = shuffledIndices.map(index => quizQuestions[index]);
            
            // ‡πÄ‡∏Å‡πá‡∏ö‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏î‡∏¥‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏â‡∏•‡∏¢
            originalQuestionOrder = shuffledIndices;
        }

        // Load question
        function loadQuestion() {
            const question = shuffledQuestions[currentQuestionIndex];
            
            // Update question number
            currentQuestionElement.textContent = currentQuestionIndex + 1;
            
            // Set question text
            questionText.textContent = `${currentQuestionIndex + 1}. ${question.question}`;
            
            // Clear options
            optionsContainer.innerHTML = '';
            
            // Add options
            const optionLetters = ['‡∏Å', '‡∏Ç', '‡∏Ñ', '‡∏á'];
            question.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn w-full text-left py-3 px-4 rounded-lg';
                
                if (userAnswers[currentQuestionIndex] === index) {
                    optionBtn.classList.add('selected');
                }
                
                optionBtn.innerHTML = `<span class="font-bold mr-2">${optionLetters[index]}.</span> ${option}`;
                
                optionBtn.addEventListener('click', () => selectOption(index));
                
                optionsContainer.appendChild(optionBtn);
            });
            
            // Update navigation buttons
            updateNavigationButtons();
        }

        // Select option
        function selectOption(optionIndex) {
            userAnswers[currentQuestionIndex] = optionIndex;
            
            // Update option buttons
            const optionButtons = optionsContainer.querySelectorAll('.option-btn');
            optionButtons.forEach((btn, index) => {
                btn.classList.remove('selected');
                if (index === optionIndex) {
                    btn.classList.add('selected');
                }
            });
            
            // Update navigation buttons
            updateNavigationButtons();
        }

        // Update navigation buttons
        function updateNavigationButtons() {
            // Previous button
            if (currentQuestionIndex > 0) {
                prevBtn.classList.remove('hidden');
            } else {
                prevBtn.classList.add('hidden');
            }
            
            // Next button
            if (currentQuestionIndex < shuffledQuestions.length - 1) {
                nextBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.add('hidden');
            }
            
            // Finish button
            if (userAnswers.every(answer => answer !== null)) {
                finishBtn.classList.remove('hidden');
            } else {
                finishBtn.classList.add('hidden');
            }
        }

        // Go to previous question
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
            }
        }

        // Go to next question
        function nextQuestion() {
            if (currentQuestionIndex < shuffledQuestions.length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            }
        }

        // Show explanation for current question
        function showExplanation() {
            const question = shuffledQuestions[currentQuestionIndex];
            const userAnswer = userAnswers[currentQuestionIndex];
            const correctAnswer = question.answer;
            const optionLetters = ['‡∏Å', '‡∏Ç', '‡∏Ñ', '‡∏á'];
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö
            let explanationHTML = `
                <div class="p-4 bg-gray-50 rounded-lg">
                    <h3 class="font-bold text-lg mb-2">‡πÄ‡∏â‡∏•‡∏¢‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${currentQuestionIndex + 1}</h3>
                    <table class="answer-table">
                        <tr>
                            <th>‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</th>
                            <th>‡πÄ‡∏â‡∏•‡∏¢</th>
                        </tr>
                        <tr>
                            <td class="${userAnswer === correctAnswer ? 'correct-answer' : 'wrong-answer'}">
                                ${userAnswer !== null ? optionLetters[userAnswer] + '. ' + question.options[userAnswer] : '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö'}
                                ${userAnswer === correctAnswer ? ' <span class="check-icon">‚úì</span>' : ''}
                            </td>
                            <td class="correct-answer">
                                ${optionLetters[correctAnswer] + '. ' + question.options[correctAnswer]}
                                <span class="check-icon">‚úì</span>
                            </td>
                        </tr>
                    </table>
                    <div class="mt-4">
                        <p class="font-medium">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:</p>
                        <p>${question.explanation}</p>
                    </div>
                </div>
            `;
            
            Swal.fire({
                title: '‡πÄ‡∏â‡∏•‡∏¢',
                html: explanationHTML,
                width: 600,
                confirmButtonText: '‡∏õ‡∏¥‡∏î',
                confirmButtonColor: '#4f46e5'
            });
        }

        // Show all answers
        function showAllAnswers() {
            let allAnswersHTML = `
                <div class="p-4">
                    <h3 class="font-bold text-xl mb-4 text-center">‡πÄ‡∏â‡∏•‡∏¢‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                    <div class="space-y-6">
            `;
            
            shuffledQuestions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const correctAnswer = question.answer;
                const optionLetters = ['‡∏Å', '‡∏Ç', '‡∏Ñ', '‡∏á'];
                
                allAnswersHTML += `
                    <div class="p-4 bg-gray-50 rounded-lg">
                        <h4 class="font-bold mb-2">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${index + 1}: ${question.question}</h4>
                        <table class="answer-table">
                            <tr>
                                <th>‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</th>
                                <th>‡πÄ‡∏â‡∏•‡∏¢</th>
                            </tr>
                            <tr>
                                <td class="${userAnswer === correctAnswer ? 'correct-answer' : 'wrong-answer'}">
                                    ${userAnswer !== null ? optionLetters[userAnswer] + '. ' + question.options[userAnswer] : '‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏≠‡∏ö'}
                                    ${userAnswer === correctAnswer ? ' <span class="check-icon">‚úì</span>' : ''}
                                </td>
                                <td class="correct-answer">
                                    ${optionLetters[correctAnswer] + '. ' + question.options[correctAnswer]}
                                    <span class="check-icon">‚úì</span>
                                </td>
                            </tr>
                        </table>
                        <div class="mt-2">
                            <p class="text-sm">${question.explanation}</p>
                        </div>
                    </div>
                `;
            });
            
            allAnswersHTML += `
                    </div>
                </div>
            `;
            
            Swal.fire({
                title: '‡πÄ‡∏â‡∏•‡∏¢‡πÅ‡∏ö‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö',
                html: allAnswersHTML,
                width: 800,
                confirmButtonText: '‡∏õ‡∏¥‡∏î',
                confirmButtonColor: '#4f46e5'
            });
        }

        // Finish quiz
        function finishQuiz() {
            // Calculate score
            score = 0;
            userAnswers.forEach((answer, index) => {
                if (answer === shuffledQuestions[index].answer) {
                    score += 10;
                }
            });
            
            // Update results page
            resultNameElement.textContent = username;
            resultClassroomElement.textContent = classroom;
            resultDateElement.textContent = quizDate;
            scoreElement.textContent = score;
            
            // Check if passed
            const isPassed = score >= 60;
            passStatusElement.textContent = isPassed ? 'üéä ‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå üéä' : '‚ùå ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå';
            passStatusElement.className = isPassed ? 'text-lg font-medium text-green-600' : 'text-lg font-medium text-red-600';
            
            // Show certificate section if passed
            if (isPassed) {
                certificateSection.classList.remove('hidden');
            } else {
                certificateSection.classList.add('hidden');
            }
            
            // Save result to Google Sheets
            saveResult(isPassed);
            
            // Show results page
            quizPage.classList.add('hidden');
            resultsPage.classList.remove('hidden');
        }

        // Save result to Google Sheets
        function saveResult(isPassed) {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbwt6g-yNU3rKWev9XXp9LYbW4wxJRFM6JTkiG--oTI5LpyLie7ReTyXZ4nIUmuYu4QAJQ/exec';
            
            const data = {
                name: username,
                classroom: classroom,
                score: score,
                date: quizDate,
                status: isPassed ? '‡∏ú‡πà‡∏≤‡∏ô' : '‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô'
            };
            
            Swal.fire({
                title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö',
                text: '‡πÇ‡∏õ‡∏£‡∏î‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                    
                    fetch(scriptURL, {
                        method: 'POST',
                        body: JSON.stringify(data),
                        headers: {
                            'Content-Type': 'text/plain'
                        }
                    })
                    .then(response => {
                        if (response.ok) {
                            Swal.fire({
                                icon: 'success',
                                title: '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢',
                                showConfirmButton: false,
                                timer: 1500
                            });
                        } else {
                            throw new Error('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        Swal.fire({
                            icon: 'error',
                            title: '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î',
                            text: '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÑ‡∏î‡πâ ‡πÇ‡∏õ‡∏£‡∏î‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á'
                        });
                    });
                }
            });
        }

        // Load scores from Google Sheets
        function loadScores() {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbwt6g-yNU3rKWev9XXp9LYbW4wxJRFM6JTkiG--oTI5LpyLie7ReTyXZ4nIUmuYu4QAJQ/exec';
            
            scoresTableBody.innerHTML = '<tr><td colspan="6" class="py-4 px-4 text-center text-gray-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</td></tr>';
            
            fetch(scriptURL)
                .then(response => response.json())
                .then(data => {
                    if (data && data.length > 0) {
                        scoresTableBody.innerHTML = '';
                        
                        data.forEach((row, index) => {
                            const tr = document.createElement('tr');
                            tr.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';
                            
                            tr.innerHTML = `
                                <td class="py-2 px-4 border-b border-gray-200">${index + 1}</td>
                                <td class="py-2 px-4 border-b border-gray-200">${row.name}</td>
                                <td class="py-2 px-4 border-b border-gray-200">${row.classroom}</td>
                                <td class="py-2 px-4 border-b border-gray-200">${row.score}</td>
                                <td class="py-2 px-4 border-b border-gray-200">${row.date}</td>
                                <td class="py-2 px-4 border-b border-gray-200">
                                    <span class="px-2 py-1 rounded-full text-xs font-medium ${row.status === '‡∏ú‡πà‡∏≤‡∏ô' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">
                                        ${row.status}
                                    </span>
                                </td>
                            `;
                            
                            scoresTableBody.appendChild(tr);
                        });
                    } else {
                        scoresTableBody.innerHTML = '<tr><td colspan="6" class="py-4 px-4 text-center text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td></tr>';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    scoresTableBody.innerHTML = '<tr><td colspan="6" class="py-4 px-4 text-center text-red-500">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td></tr>';
                });
        }

        // Load dashboard data
        function loadDashboardData() {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbwt6g-yNU3rKWev9XXp9LYbW4wxJRFM6JTkiG--oTI5LpyLie7ReTyXZ4nIUmuYu4QAJQ/exec';
            
            passedTableBody.innerHTML = '<tr><td colspan="5" class="py-4 px-4 text-center text-gray-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</td></tr>';
            certificateList.innerHTML = '<div class="col-span-1 md:col-span-2 text-center py-4 text-gray-500">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>';
            
            fetch(scriptURL)
                .then(response => response.json())
                .then(data => {
                    if (data && data.length > 0) {
                        // Update summary
                        const totalParticipants = data.length;
                        const passedStudents = data.filter(row => row.status === '‡∏ú‡πà‡∏≤‡∏ô');
                        const failedStudents = data.filter(row => row.status === '‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô');
                        
                        totalParticipantsElement.textContent = totalParticipants;
                        passedCountElement.textContent = passedStudents.length;
                        failedCountElement.textContent = failedStudents.length;
                        
                        // Update passed students table
                        if (passedStudents.length > 0) {
                            passedTableBody.innerHTML = '';
                            
                            passedStudents.forEach((row, index) => {
                                const tr = document.createElement('tr');
                                tr.className = index % 2 === 0 ? 'bg-white' : 'bg-gray-50';
                                
                                tr.innerHTML = `
                                    <td class="py-2 px-4 border-b border-gray-200">${index + 1}</td>
                                    <td class="py-2 px-4 border-b border-gray-200">${row.name}</td>
                                    <td class="py-2 px-4 border-b border-gray-200">${row.classroom}</td>
                                    <td class="py-2 px-4 border-b border-gray-200">${row.score}</td>
                                    <td class="py-2 px-4 border-b border-gray-200">${row.date}</td>
                                `;
                                
                                passedTableBody.appendChild(tr);
                            });
                        } else {
                            passedTableBody.innerHTML = '<tr><td colspan="5" class="py-4 px-4 text-center text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå</td></tr>';
                        }
                        
                        // Update certificate list
                        if (passedStudents.length > 0) {
                            certificateList.innerHTML = '';
                            
                            passedStudents.forEach((row, index) => {
                                const card = document.createElement('div');
                                card.className = 'bg-white p-4 rounded-lg shadow border border-gray-200';
                                
                                card.innerHTML = `
                                    <h4 class="font-bold text-gray-800">${row.name}</h4>
                                    <p class="text-sm text-gray-600">${row.classroom} | ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: ${row.score}</p>
                                    <p class="text-sm text-gray-600 mb-3">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏î‡∏™‡∏≠‡∏ö: ${row.date}</p>
                                    <button class="generate-cert-btn bg-green-500 hover:bg-green-600 text-white text-sm py-1 px-3 rounded" 
                                            data-name="${row.name}" 
                                            data-classroom="${row.classroom}" 
                                            data-score="${row.score}" 
                                            data-date="${row.date}">
                                        üèÜ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£
                                    </button>
                                `;
                                
                                certificateList.appendChild(card);
                            });
                            
                            // Add event listeners to certificate buttons
                            document.querySelectorAll('.generate-cert-btn').forEach(btn => {
                                btn.addEventListener('click', () => {
                                    const certData = {
                                        name: btn.dataset.name,
                                        classroom: btn.dataset.classroom,
                                        score: btn.dataset.score,
                                        date: btn.dataset.date
                                    };
                                    generateCertificatePDF(certData);
                                });
                            });
                        } else {
                            certificateList.innerHTML = '<div class="col-span-1 md:col-span-2 text-center py-4 text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏Å‡∏ì‡∏ë‡πå</div>';
                        }
                    } else {
                        totalParticipantsElement.textContent = '0';
                        passedCountElement.textContent = '0';
                        failedCountElement.textContent = '0';
                        passedTableBody.innerHTML = '<tr><td colspan="5" class="py-4 px-4 text-center text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td></tr>';
                        certificateList.innerHTML = '<div class="col-span-1 md:col-span-2 text-center py-4 text-gray-500">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>';
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    totalParticipantsElement.textContent = '0';
                    passedCountElement.textContent = '0';
                    failedCountElement.textContent = '0';
                    passedTableBody.innerHTML = '<tr><td colspan="5" class="py-4 px-4 text-center text-red-500">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</td></tr>';
                    certificateList.innerHTML = '<div class="col-span-1 md:col-span-2 text-center py-4 text-red-500">‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>';
                });
        }

        // Generate certificate PDF
        function generateCertificatePDF(data = null) {
            // Use provided data or current user data
            const certData = data || {
                name: username,
                classroom: classroom,
                score: score,
                date: quizDate
            };
            
            // Define the certificate content
            const docDefinition = {
                pageSize: 'A4',
                pageOrientation: 'landscape',
                background: [
                    {
                        image: 'https://krunid.github.io/knid13/suntonpu.jpg',
                        width: 842,
                        height: 595
                    }
                ],
                content: [
                    {
                        text: '‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£',
                        fontSize: 36,
                        bold: true,
                        alignment: 'center',
                        margin: [0, 80, 0, 20],
                        color: '#4f46e5'
                    },
                    {
                        text: '‡∏Ç‡∏≠‡∏°‡∏≠‡∏ö‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡∏ö‡∏±‡∏ï‡∏£‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤',
                        fontSize: 18,
                        alignment: 'center',
                        margin: [0, 20, 0, 10]
                    },
                    {
                        text: certData.name,
                        fontSize: 24,
                        bold: true,
                        alignment: 'center',
                        margin: [0, 10, 0, 10],
                        color: '#4f46e5'
                    },
                    {
                        text: `‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô ${certData.classroom}`,
                        fontSize: 18,
                        alignment: 'center',
                        margin: [0, 10, 0, 10]
                    },
                    {
                        text: '‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ',
                        fontSize: 18,
                        alignment: 'center',
                        margin: [0, 10, 0, 10]
                    },
                    {
                        text: '‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á "‡∏ß‡∏±‡∏ô‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏†‡∏π‡πà"',
                        fontSize: 24,
                        bold: true,
                        alignment: 'center',
                        margin: [0, 10, 0, 10],
                        color: '#4f46e5'
                    },
                    {
                        text: `‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô ${certData.score} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`,
                        fontSize: 18,
                        alignment: 'center',
                        margin: [0, 10, 0, 20]
                    },
                    {
                        text: `‡πÉ‡∏´‡πâ‡πÑ‡∏ß‡πâ ‡∏ì ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${certData.date}`,
                        fontSize: 16,
                        alignment: 'center',
                        margin: [0, 20, 0, 40]
                    },
                    {
                        columns: [
                            {
                                width: '*',
                                text: ''
                            },
                            {
                                width: 'auto',
                                stack: [
                                    {
                                        text: '............................................',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '(‡∏ú‡∏π‡πâ‡∏≠‡∏≥‡∏ô‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô)',
                                        fontSize: 14,
                                        alignment: 'center',
                                        margin: [0, 5, 0, 0]
                                    }
                                ]
                            },
                            {
                                width: '*',
                                text: ''
                            }
                        ]
                    }
                ],
                defaultStyle: {
                    font: 'Sarabun'
                }
            };
            
            // Generate and open the PDF
            pdfMake.createPdf(docDefinition).open();
        }

        // Event Listeners
        startQuizBtn.addEventListener('click', initQuiz);
        showScoresBtn.addEventListener('click', () => {
            loginPage.classList.add('hidden');
            scoresPage.classList.remove('hidden');
            loadScores();
        });
        showDashboardBtn.addEventListener('click', () => {
            loginPage.classList.add('hidden');
            dashboardPage.classList.remove('hidden');
            loadDashboardData();
        });
        
        prevBtn.addEventListener('click', prevQuestion);
        nextBtn.addEventListener('click', nextQuestion);
        showExplanationBtn.addEventListener('click', showExplanation);
        finishBtn.addEventListener('click', finishQuiz);
        
        generateCertificateBtn.addEventListener('click', () => generateCertificatePDF());
        showAnswersBtn.addEventListener('click', showAllAnswers);
        
        retryBtn.addEventListener('click', () => {
            resultsPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
        });
        
        viewScoresBtn.addEventListener('click', () => {
            resultsPage.classList.add('hidden');
            scoresPage.classList.remove('hidden');
            loadScores();
        });
        
        backToHomeFromScores.addEventListener('click', () => {
            scoresPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
        });
        
        backToHomeFromDashboard.addEventListener('click', () => {
            dashboardPage.classList.add('hidden');
            loginPage.classList.remove('hidden');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'94f8939262f84b59',t:'MTc0OTg5MDk4OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>

